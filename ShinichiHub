-- ğŸ”„ Chá»n Team (Marines hoáº·c Pirates)
if _G.MARINES and (not game.Players.LocalPlayer.Team or game.Players.LocalPlayer.Team.Name ~= "Marines") then
    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("SetTeam", "Marines")
    wait(2)
elseif not _G.MARINES and (not game.Players.LocalPlayer.Team or game.Players.LocalPlayer.Team.Name ~= "Pirates") then
    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("SetTeam", "Pirates")
    wait(2)
end

-- ğŸ•— Lag 20 giÃ¢y trÆ°á»›c khi báº¯t Ä‘áº§u
local function ExtremeLag()
    local lagTime = tick() + 20
    while tick() < lagTime do end
end
ExtremeLag()

-- ğŸŒŸ UI Setup (KhÃ´ng ná»n Ä‘en, giá»‘ng áº£nh cá»§a báº¡n)
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local TimerLabel = Instance.new("TextLabel")
local StatusLabel = Instance.new("TextLabel")
local ChestCountLabel = Instance.new("TextLabel")  -- Hiá»ƒn thá»‹ sá»‘ rÆ°Æ¡ng Ä‘Ã£ nháº·t

ScreenGui.Parent = game:GetService("CoreGui")
MainFrame.Parent = ScreenGui
MainFrame.BackgroundTransparency = 1  -- áº¨n ná»n
MainFrame.Size = UDim2.new(0, 400, 0, 150)
MainFrame.Position = UDim2.new(0.5, -200, 0.05, 0)

Title.Parent = MainFrame
Title.Text = "Shinichi Hub ( Auto Chest )"
Title.Size = UDim2.new(1, 0, 0.2, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(255, 204, 0)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 28

TimerLabel.Parent = MainFrame
TimerLabel.Text = "Time: 00m00s"
TimerLabel.Size = UDim2.new(1, 0, 0.2, 0)
TimerLabel.Position = UDim2.new(0, 0, 0.2, 0)
TimerLabel.BackgroundTransparency = 1
TimerLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TimerLabel.Font = Enum.Font.GothamBold
TimerLabel.TextSize = 22

StatusLabel.Parent = MainFrame
StatusLabel.Text = "Status: Collecting Chests..."
StatusLabel.Size = UDim2.new(1, 0, 0.2, 0)
StatusLabel.Position = UDim2.new(0, 0, 0.4, 0)
StatusLabel.BackgroundTransparency = 1
StatusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusLabel.Font = Enum.Font.GothamBold
StatusLabel.TextSize = 22

ChestCountLabel.Parent = MainFrame
ChestCountLabel.Text = "Chests Collected: 0"
ChestCountLabel.Size = UDim2.new(1, 0, 0.2, 0)
ChestCountLabel.Position = UDim2.new(0, 0, 0.6, 0)
ChestCountLabel.BackgroundTransparency = 1
ChestCountLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ChestCountLabel.Font = Enum.Font.GothamBold
ChestCountLabel.TextSize = 22

-- ğŸ¯ Auto Chest (Tween tá»‘c Ä‘á»™ há»£p lÃ½)
local TweenService = game:GetService("TweenService")
local function TweenToPosition(position, distance)
    local player = game.Players.LocalPlayer
    local char = player.Character
    if not char then return end
    
    local humanoidRootPart = char:FindFirstChild("HumanoidRootPart")
    if humanoidRootPart then
        local speed = math.clamp(distance / 100 + 1, 1, 3) -- Xa thÃ¬ nhanh 50%, gáº§n thÃ¬ nhanh bÃ¬nh thÆ°á»ng
        local tweenInfo = TweenInfo.new(speed, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(humanoidRootPart, tweenInfo, {CFrame = CFrame.new(position)})
        tween:Play()
    end
end

_G.AutoChest = true
local chestCount = 0  -- Äáº¿m sá»‘ rÆ°Æ¡ng Ä‘Ã£ nháº·t

spawn(function()
    while _G.AutoChest do
        wait(0.5)
        local player = game.Players.LocalPlayer
        local char = player.Character or player.CharacterAdded:Wait()
        local pos = char:GetPivot().Position
        local chests = game:GetService("CollectionService"):GetTagged("_ChestTagged")
        local closestDist, closestChest = math.huge

        for _, chest in pairs(chests) do
            if not chest:GetAttribute("IsDisabled") then
                local dist = (chest:GetPivot().Position - pos).Magnitude
                if dist < closestDist then
                    closestDist, closestChest = dist, chest
                end
            end
        end

        if closestChest then
            StatusLabel.Text = "Status: Moving to Chest..."
            local chestPos = closestChest:GetPivot().Position
            TweenToPosition(chestPos, closestDist)  -- DÃ¹ng Tween vá»›i tá»‘c Ä‘á»™ há»£p lÃ½
            wait(math.clamp(closestDist / 100 + 1, 1, 3))  -- Äá»£i Ä‘áº¿n nÆ¡i, xa thÃ¬ lÃ¢u hÆ¡n
            StatusLabel.Text = "Status: Collecting Chest..."
            chestCount = chestCount + 1  -- TÄƒng sá»‘ rÆ°Æ¡ng Ä‘Ã£ nháº·t
            ChestCountLabel.Text = "Chests Collected: " .. chestCount
        end
    end
end)

-- ğŸ”„ Hop Server (Náº¿u nháº·t Ä‘á»§ 50 rÆ°Æ¡ng hoáº·c khÃ´ng cÃ²n rÆ°Æ¡ng)
spawn(function()
    while _G.AutoChest do
        wait(5)
        local chests = #game:GetService("CollectionService"):GetTagged("_ChestTagged")

        if chestCount >= 50 or chests == 0 then
            StatusLabel.Text = "Status: Hopping Server..."
            wait(2)
            game:GetService("TeleportService"):Teleport(game.PlaceId)
        end
    end
end)

-- â³ Timer (Hiá»ƒn thá»‹ thá»i gian)
spawn(function()
    local seconds = 0
    while _G.AutoChest do
        wait(1)
        seconds = seconds + 1
        local minutes = math.floor(seconds / 60)
        local secs = seconds % 60
        TimerLabel.Text = string.format("Time: %02dm%02ds", minutes, secs)
    end
end)

-- ğŸ® TÃ¹y chá»‰nh FPS Boost
local function SetGraphicsQuality(level)
    local PlayerSettings = game:GetService("Players").LocalPlayer.PlayerSettings
    PlayerSettings.SavingEnabled = true
    PlayerSettings.GraphicsQuality = level
end

-- Báº¡n cÃ³ thá»ƒ thay Ä‘á»•i má»©c Ä‘á»™ Ä‘á»“ há»a tá»« 0 (tháº¥p nháº¥t) Ä‘áº¿n 10 (cao nháº¥t)
SetGraphicsQuality(2) -- Giáº£m má»©c Ä‘á»“ há»a xuá»‘ng Ä‘á»ƒ tá»‘i Æ°u FPS
